<div>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" ng-class="{'active': pagos.tabYearActive == $index}" ng-repeat="item in pagos.periodos">
            <a href="#" ng-click="pagos.tabYearActive = $index" role="tab" data-toggle="tab">{{item.year}}</a>
        </li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane" ng-class="{'active': pagos.tabYearActive == $index}" id="periodo-year-{{$index}}" ng-repeat="item in pagos.periodos">
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" ng-class="{'active': pagos.tabMonthActive == $index}" ng-repeat="month in item.months">
                    <a href="#" ng-click="pagos.changeTab($index, item.year, month)" role="tab" data-toggle="tab">{{month}}</a>
                </li>
            </ul>
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane" ng-class="{'active': pagos.tabMonthActive == $index}" ng-repeat="month in item.months">
                    <h3>Registros de {{month}}:</h3>
                    <div ng-if="session.type != 'Contable'">
                        <button class="btn btn-sm btn-primary" ng-click="showModalImportPagos(page.fields, null, {month: month, year: item.year})">
                            <i class="glyphicon glyphicon-cloud-upload"></i> Subir archivo excel de {{month}}
                        </button>
                        <button class="btn btn-sm btn-primary" ng-click="pagos.notificarContador(month, item.year)">
                            <i class="glyphicon glyphicon-copy"></i> Notificar al contador
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div>
        <div class="form-group" style="margin-top:10px;">
            <label class="sr-only" for="buscador"></label>
            <div class="input-group">
                <div class="input-group-addon"><span class="glyphicon glyphicon-search"></span></div>
                <input placeholder="Buscar aquÃ­" type="text" class="form-control" ng-keyup="pagos.search()" ng-model="page.filter.value" id="buscador">
            </div>
        </div>

        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th></th>
                    <th ng-repeat="field in page.fields track by field.name" ng-if="field.name != '_id'">
                        <span ng-if="session.type != 'Contable'">{{field.title}}</span>
                        <span ng-if="session.type == 'Contable' && field.name != 'nombre' && field.name != 'log'">{{field.title}}</span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="(index,trdata) in tabledata  | startFrom: pagination.page * pagination.perPage | limitTo: pagination.perPage track by trdata._id">
                    <td ng-repeat="(key,tddata) in trdata" ng-if="key != '_id' && key != 'month' && key != 'year' && key != 'type' && key != 'debe' && key != 'haber'">
                        <span class="text-success" ng-if="key == 'tarifa'">
                            <a href="javascript:" data-popover-content="{{tddata}}" class="popover-tarifa">
                                <i class="glyphicon glyphicon-tags"></i>
                            </a>&nbsp;
                            <b>{{tddata.total}} UF:&nbsp;</b> 
                        </span>
                        {{tddata.totalpesos| currency}}

                        <span ng-class="{'text-danger':key == 'index'}" ng-if="key != 'tarifa' && session.type != 'Contable'">{{tddata}}</span>
                        <span class="text-danger" ng-if="session.type == 'Contable' && key == 'index'">{{trdata.index}}</span>
                        <span ng-if="(key == 'run' || key == 'codigo') && session.type == 'Contable'">{{tddata}}</span>
                    </td>
                    <td ng-repeat="(key,item) in trdata" ng-if="key == 'type'">
                        <div ng-repeat="field in page.fields track by field.name" ng-if="field.name == 'type'" style="float:left">
                            <select ng-model="item" ng-change="pagos.changeStatus(item, trdata)">
                                <option ng-repeat="option in field.data.options" value="{{option.value}}" ng-selected="item == option.value">{{option.key}}</option>
                            </select>
                        </div>
                        <button style="float:left;margin-left:5px;" class="btn btn-default btn-xs" ng-click="pagos.modalEditarDetalles(trdata)">
                            <i class="glyphicon glyphicon-font"></i> Documentos y comentarios
                        </button>
                        <div style="clear:both"></div>
                    </td>
                    <td ng-repeat="(key,item) in trdata" ng-if="key == 'debe' || key == 'haber'">{{item| currency}}</td>
                </tr>
            </tbody>
        </table>

    </div>

</div>
